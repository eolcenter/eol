<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Diaporama Viewer</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #000;
      overflow: hidden;
    }

    /* Splash screens */
    #splash, #splash2 {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-position: center;
      background-repeat: no-repeat;
      z-index: 100;
      display: none;
    }

    /* First splash (keep contained) */
    #splash {
      background-image: url('https://www.eolcenter.net/wp-content/uploads/2020/09/eol-open-graph.png');
      background-size: contain;
    }

    /* Second splash (stretch to fit TV) */
    #splash2 {
      background-image: url('https://imgur.com/5jVeMeU.png');
      background-size: cover;
    }

    iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      transition: opacity 1s ease;
      opacity: 0;
    }

    iframe.active {
      opacity: 1;
      z-index: 1;
    }

    iframe.inactive {
      z-index: 0;
    }
  </style>
</head>
<body>

  <!-- Splash screens -->
  <div id="splash"></div>
  <div id="splash2"></div>

  <iframe id="frame1" class="inactive"></iframe>
  <iframe id="frame2" class="inactive"></iframe>
  <iframe id="frame3" class="inactive"></iframe>
  <iframe id="frame4" class="inactive"></iframe> <!-- new iframe -->

  <script>
    const pages = [
      "https://eolcenter.github.io/eol/course.html",
      "https://eolcenter.github.io/eol/podium.html",
      "https://eolcenter.github.io/eol/resultat.html",
      "https://eolcenter.github.io/eol/test.html" // new page
    ];

    const frames = [
      document.getElementById("frame1"),
      document.getElementById("frame2"),
      document.getElementById("frame3"),
      document.getElementById("frame4") // new iframe
    ];

    const splash1 = document.getElementById('splash');
    const splash2 = document.getElementById('splash2');

    let index = -1; // start before first splash
    const splash1Time = 4000; // first splash (4s)
    const splash2Time = 5000; // second splash (5s)
    const pageTime = 17000;   // each page display time (17s)

    function showNext() {
      // Hide all frames
      frames.forEach(f => f.classList.remove("active"));
      splash1.style.display = 'none';
      splash2.style.display = 'none';

      if (index === -1) {
        // Show first splash
        splash1.style.display = 'block';
        index = -0.5; // marker for splash 2
        setTimeout(showNext, splash1Time);
      } else if (index === -0.5) {
        // Show second splash
        splash2.style.display = 'block';
        index = 0;
        setTimeout(showNext, splash2Time);
      } else if (index < pages.length) {
        // Show diaporama page
        const frame = frames[index];
        frame.src = pages[index] + "?t=" + Date.now(); // force reload
        frame.classList.add("active");
        index++;
        setTimeout(showNext, pageTime);
      } else {
        // Restart from first splash
        index = -1;
        showNext();
      }
    }

    window.addEventListener('load', showNext);
  </script>

</body>
</html>
